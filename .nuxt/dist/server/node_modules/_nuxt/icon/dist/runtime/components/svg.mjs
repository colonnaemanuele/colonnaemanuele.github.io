import { Icon } from "@iconify/vue";
import { defineComponent, onServerPrefetch, h } from "vue";
import { useResolvedName, resolveCustomizeFn, loadIcon } from "./shared.mjs";
import { useAsyncData } from "../../../../../nuxt/dist/app/composables/asyncData.mjs";
import { useNuxtApp } from "../../../../../nuxt/dist/app/nuxt.mjs";
import { useAppConfig } from "../../../../../nuxt/dist/app/config.mjs";
const NuxtIconSvg = /* @__PURE__ */ defineComponent({
  name: "NuxtIconSvg",
  props: {
    name: {
      type: String,
      required: true
    },
    customize: {
      type: [Function, Boolean, null],
      default: null,
      required: false
    }
  },
  setup(props, { slots }) {
    useNuxtApp();
    const options = useAppConfig().icon;
    const name = useResolvedName(() => props.name);
    const storeKey = "i-" + name.value;
    if (name.value) {
      onServerPrefetch(async () => {
        {
          await useAsyncData(
            storeKey,
            async () => await loadIcon(name.value, options.fetchTimeout),
            { deep: false }
          );
        }
      });
    }
    return () => h(Icon, {
      icon: name.value,
      ssr: true,
      // Iconify uses `customise`, where we expose `customize` for consistency
      customise: resolveCustomizeFn(props.customize, options.customize)
    }, slots);
  }
});
export {
  NuxtIconSvg
};
//# sourceMappingURL=svg.mjs.map
